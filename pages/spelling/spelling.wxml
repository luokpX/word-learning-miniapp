<view class="container">
  <view class="progress-info">
    <text class="progress-text">{{currentIndex + 1}} / {{wordList.length}}</text>
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{progressPercent}}%"></view>
    </view>
  </view>

  <view class="word-card" wx:if="{{!sessionComplete}}">
    <view class="word-meaning">{{currentWord.meaning}}</view>
    <view class="word-phonetic-row" wx:if="{{currentWord.phonetic || currentWord.audioUrl}}">
      <text class="word-phonetic" wx:if="{{currentWord.phonetic}}">{{currentWord.phonetic}}</text>
      <view class="audio-btn" bindtap="playAudio" data-word="{{currentWord}}">
        <text class="audio-icon">{{isPlaying ? 'ğŸ”Š' : 'ğŸ”ˆ'}}</text>
      </view>
    </view>
    
    <view class="spell-input-container" bindtap="focusInput">
      <view class="letter-boxes">
        <view 
          class="letter-box {{userInput.length > index ? 'filled' : ''}}" 
          wx:for="{{letterCount}}" 
          wx:key="index">
          <text class="letter-text">{{userInput[index] || ''}}</text>
          <view class="underline"></view>
        </view>
      </view>
      <input 
        class="hidden-input" 
        value="{{userInput}}"
        bindinput="onInput"
        bindconfirm="checkAnswer"
        focus="{{inputFocused && !showResult}}"
        maxlength="{{letterCount}}"
      />
    </view>
    
    <view class="result-tip" wx:if="{{showResult}}">
      <text class="{{isCorrect ? 'correct' : 'wrong'}}" wx:if="{{isCorrect}}">âœ“ æ­£ç¡®ï¼</text>
      <text class="{{isCorrect ? 'correct' : 'wrong'}}" wx:else>âœ— æ­£ç¡®æ‹¼å†™ï¼š{{currentWord.text}}</text>
    </view>
    
    <view class="action-btns">
      <button class="btn-check" bindtap="checkAnswer" wx:if="{{!showResult}}">æ£€æŸ¥</button>
      <button class="btn-next" bindtap="nextWord" wx:if="{{showResult}}">{{currentIndex === wordList.length - 1 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€ä¸ª'}}</button>
    </view>
  </view>

  <view class="session-complete" wx:if="{{sessionComplete}}">
    <view class="complete-content">
      <text class="complete-icon">ğŸ‰</text>
      <text class="complete-title">ç»ƒä¹ å®Œæˆï¼</text>
      <view class="result-stats">
        <view class="stat-item">
          <text class="stat-num">{{stats.correct}}</text>
          <text class="stat-label">æ­£ç¡®</text>
        </view>
        <view class="stat-item">
          <text class="stat-num">{{stats.wrong}}</text>
          <text class="stat-label">é”™è¯¯</text>
        </view>
      </view>
      <view class="complete-actions">
        <button class="btn btn-secondary" bindtap="restartPractice">å†ç»ƒä¸€é</button>
        <button class="btn btn-primary" bindtap="goBack">è¿”å›</button>
      </view>
    </view>
  </view>
</view>
