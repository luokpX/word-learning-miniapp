<view class="container">
  <view class="study-header">
    <view class="progress-info">
      <text class="progress-text">{{currentIndex + 1}} / {{wordList.length}}</text>
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{progressPercent}}%"></view>
      </view>
    </view>
  </view>

  <view class="flashcard-container">
    <view class="flashcard {{isFlipped ? 'flipped' : ''}}" bindtap="flipCard">
      <view class="card-front">
        <view class="word-main">
          <text class="word-text">{{currentWord.text}}</text>
          <text class="word-phonetic">{{currentWord.phonetic}}</text>
        </view>
        <view class="audio-controls">
          <view class="audio-btn {{isPlaying ? 'playing' : ''}}" catchtap="playAudio" data-url="{{currentWord.audioUrl}}">
            <text class="audio-icon-emoji">{{isPlaying ? 'ğŸ”Š' : 'â–¶ï¸'}}</text>
            <text class="audio-text">{{isPlaying ? 'æ’­æ”¾ä¸­...' : 'æ’­æ”¾å‘éŸ³'}}</text>
          </view>
          <view class="speed-btn" catchtap="toggleSpeed">
            <text class="speed-text">{{playSpeed === 1 ? 'ğŸ¢ æ…¢é€Ÿ' : 'ğŸ‡ æ­£å¸¸'}}</text>
          </view>
        </view>
        <text class="flip-hint">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹é‡Šä¹‰</text>
      </view>
      <view class="card-back">
        <text class="meaning-text">{{currentWord.meaning}}</text>
        <view class="examples" wx:if="{{currentWord.examples && currentWord.examples.length}}">
          <text class="example-label">ä¾‹å¥ï¼š</text>
          <text class="example-text">{{currentWord.examples[0]}}</text>
        </view>
        <text class="flip-hint">ç‚¹å‡»å¡ç‰‡è¿”å›</text>
      </view>
    </view>
  </view>

  <view class="action-buttons" wx:if="{{isFlipped}}">
    <view class="action-btn wrong" bindtap="markWrong">
      <text class="btn-icon">âœ—</text>
      <text class="btn-text">ä¸è®¤è¯†</text>
    </view>
    <view class="action-btn hard" bindtap="markHard">
      <text class="btn-icon">ğŸ˜</text>
      <text class="btn-text">æœ‰ç‚¹éš¾</text>
    </view>
    <view class="action-btn easy" bindtap="markEasy">
      <text class="btn-icon">âœ“</text>
      <text class="btn-text">è®¤è¯†äº†</text>
    </view>
  </view>

  <view class="study-controls" wx:if="{{!isFlipped}}">
    <view class="control-btn prev" bindtap="prevWord" wx:if="{{currentIndex > 0}}">
      <text>ä¸Šä¸€ä¸ª</text>
    </view>
    <view class="control-btn next" bindtap="nextWord">
      <text>{{currentIndex === wordList.length - 1 ? 'å®Œæˆå­¦ä¹ ' : 'ä¸‹ä¸€ä¸ª'}}</text>
    </view>
  </view>

  <view class="session-complete" wx:if="{{sessionComplete}}">
    <view class="complete-content">
      <text class="complete-icon">ğŸ‰</text>
      <text class="complete-title">å¤ªæ£’äº†ï¼</text>
      <text class="complete-subtitle">æœ¬æ¬¡å­¦ä¹ å®Œæˆ</text>
      <view class="result-stats">
        <view class="stat-item">
          <text class="stat-num">{{stats.easy}}</text>
          <text class="stat-label">è®¤è¯†</text>
        </view>
        <view class="stat-item">
          <text class="stat-num">{{stats.hard}}</text>
          <text class="stat-label">å¤ä¹ </text>
        </view>
        <view class="stat-item">
          <text class="stat-num">{{stats.wrong}}</text>
          <text class="stat-label">ä¸ä¼š</text>
        </view>
      </view>
      <view class="complete-actions">
        <button class="btn btn-secondary" bindtap="restartStudy">å†å­¦ä¸€é</button>
        <button class="btn btn-primary" bindtap="goHome">è¿”å›é¦–é¡µ</button>
      </view>
    </view>
  </view>
</view>
